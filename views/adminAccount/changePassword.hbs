{{#section 'js'}}
<!-- password-script -->
<script>
    /*window.onload = function () {
        document.getElementById("password").onchange = validatePassword;
        document.getElementById("confirm_password").onchange = validatePassword;
    }*/

    function kiemtraMatKhauHopLe() {
        var pass = document.getElementById("password");
        var filter = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/;
        if (!filter.test(pass.value)) {
            return false;
        }
        else {
            return true;
        }
    }

    function validatePassword(event) {
        var isCorrectPass = kiemtraMatKhauHopLe();
        var pass2 = document.getElementById("confirm_password").value;
        var pass1 = document.getElementById("password").value;
        if (isCorrectPass == false) {
            event.preventDefault();
            document.getElementById("warning_pass").style.display = "block";
        }
        else {
            document.getElementById("warning_pass").style.display = "none";
        }
        if (pass1 != pass2) {
            event.preventDefault();
            document.getElementById("warning_password").style.display = "block";
        }
        else
            document.getElementById("warning_password").style.display = "none";
        //empty string means no validation error
    }

</script>
<!-- //password-script -->
{{/section}}

<div class="row justify-content-center">
    <div class="col-xl-10 col-lg-12 col-md-9">
        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <!-- Nested Row within Card Body -->
                <div class="row" style="background-color: #007bff;">
                    <div class="col-lg-6 d-none d-lg-block align-self-center">
                        <div class="col-lg-12">
                            <h1 class="text-center align-middle">
                                <div class="text-white font-weight-bold font-italic">
                                    <img src="/img/logo.png" alt="Logo" class="img-fluid">
                                    <br>HexaD Store
                                </div>
                            </h1>
                            <h4 class="text-center align-middle text-white">
                                Nền tảng thương mại điện tử hàng đầu Việt Nam
                            </h4>
                        </div>
                    </div>
                    <div class="col-lg-6 bg-white">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-2">Đổi mật khẩu</h1>
                            </div>
                            <div class="row">
                                {{#if isFailUser}}
                                <h6 class="text-danger"><i class="fas fa-exclamation-triangle"></i> Tên đăng nhập đã tồn tại</h6>
                                {{/if}}
                            </div>

                            <div class="row" style="display: none" id="warning_password">
                                <h6 class="text-danger"><i class="fas fa-exclamation-triangle"></i> Mật khẩu không trùng nhau</h6>
                            </div>

                            <div class="row" style="display: none" id="warning_pass">
                                <h6 class="text-danger"><i class="fas fa-exclamation-triangle"></i> Mật khẩu tối thiểu có 8 ký tự, ít nhất
                                                    1 chữ cái, 1 chữ số và 1 ký tự đặc biệt
                                </h6>
                            </div>
                            <form action="/mail/change-password" class="user" method="POST" onsubmit="return validatePassword(event)">
                                <div class="form-group">
                                    <input type="text" class="form-control form-control-user"
                                        id="Name"
                                        placeholder="Tên đăng nhập mới" name="Name" value="{{name}}" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control form-control-user"
                                        id="password" 
                                        placeholder="Mật khẩu" name="Password" value="{{password}}" required>
                                </div>
                                <div class="form-group">
                                    <input type="password" class="form-control form-control-user"
                                        id="confirm_password"
                                        placeholder="Xác nhận mật khẩu" name="confirm_password" value="{{password}}" required>
                                </div>
                                <button type="submit" class="btn btn-primary btn-user btn-block">
                                    Xác nhận
                                </button>
                            </form>
                            <hr>
                            {{!-- <div class="text-center">
                                <a class="small" href="register.html">Create an Account!</a>
                            </div> --}}
                            {{!-- <div class="text-center">
                                <a class="small" href="login.html">Bạn đã có tài khoản? Đăng nhập ngay!</a>
                            </div> --}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>